<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lumi Lip Sync Demo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/src/style.css" />
</head>

<body>
  <div id="app">
    <!-- Background glow -->
    <div class="bg-glow glow-1"></div>
    <div class="bg-glow glow-2"></div>

    <!-- Header -->
    <header class="header">
      <div class="logo">
        <span class="logo-icon">ðŸŽ¤</span>
        <h1>Lumi <span class="accent">Lip Sync</span></h1>
      </div>
      <p class="subtitle">Vietnamese Phoneme Lip Sync Demo</p>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Character Display -->
      <div class="character-section">
        <div class="character-container" id="characterContainer">
          <img src="./assets/character.png" alt="Character" class="character-img" id="characterImg" />
          <img src="./assets/lips/17.png" alt="Lip" class="lip-overlay" id="lipOverlay" />
        </div>
        <div class="phoneme-display">
          <span class="phoneme-label">Kháº©u hÃ¬nh:</span>
          <span class="phoneme-value" id="phonemeValue">NEUTRAL</span>
        </div>
      </div>

      <!-- Controls Section -->
      <div class="controls-section">
        <!-- Upload Area -->
        <div class="upload-area" id="uploadArea">
          <div class="upload-icon">ðŸŽµ</div>
          <p class="upload-text">KÃ©o tháº£ hoáº·c click Ä‘á»ƒ táº£i lÃªn Audio + JSON</p>
          <p class="upload-subtext">Báº¡n cÅ©ng cÃ³ thá»ƒ kÃ©o tháº£ file JSON vÃ o lÃºc Ä‘ang phÃ¡t Ä‘á»ƒ bá»• sung</p>
          <input type="file" id="filesInput" accept="audio/*,.json" multiple hidden />
        </div>

        <!-- Now Playing -->
        <div class="now-playing hidden" id="nowPlaying">
          <div class="track-info">
            <span class="track-icon">ðŸŽ¶</span>
            <span class="track-name" id="trackName">audio.mp3</span>
          </div>

          <!-- Visualizer Omitted -> Now using timeline view -->
          <div class="timeline-container" id="timelineContainer">
            <div class="timeline-tokens" id="timelineTokens"></div>
          </div>

          <!-- Progress Bar -->
          <div class="progress-container" id="progressContainer">
            <div class="progress-bar" id="progressBar"></div>
          </div>
          <div class="time-display">
            <span id="currentTime">0:00</span>
            <span id="totalTime">0:00</span>
          </div>

          <!-- Playback Controls -->
          <div class="playback-controls">
            <button class="btn btn-secondary" id="btnStop" title="Stop">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <rect x="6" y="6" width="12" height="12" rx="2" />
              </svg>
            </button>
            <button class="btn btn-primary" id="btnPlayPause" title="Play/Pause">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" id="playIcon">
                <polygon points="8,5 20,12 8,19" />
              </svg>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" id="pauseIcon" class="hidden">
                <rect x="6" y="5" width="4" height="14" rx="1" />
                <rect x="14" y="5" width="4" height="14" rx="1" />
              </svg>
            </button>
            <button class="btn btn-secondary" id="btnUploadNew" title="Upload má»›i">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
            </button>
          </div>
        </div>

        <!-- Lip Chart Reference -->
        <div class="lip-chart">
          <h3 class="chart-title">ðŸ“‹ Báº£ng kháº©u hÃ¬nh</h3>
          <div class="chart-grid" id="chartGrid">
            <!-- Generated by JS -->
          </div>
        </div>
      </div>
    </main>
  </div>

  <audio id="audioPlayer" crossorigin="anonymous"></audio>
  <script type="module" src="/src/main.js"></script>
</body>

</html>